(function(){define(["aloha","aloha/plugin","jquery","aloha/ephemera","ui/ui","ui/button","exercise/exercise-plugin","semanticblock/semanticblock-plugin","css!multipart/css/multipart-plugin.css"],function(e,t,n,r,i,s,o,u){var a='<div class="multipart">\n    <div class="body"></div>\n</div>',f='<div class="type-container dropdown aloha-ephemera">\n    <span class="type btn-link" data-toggle="dropdown"></span>\n    <ul class="dropdown-menu">\n        <li><span class="btn-link" data-type="Worked Example">Worked Example</span></li>\n        <li><span class="btn-link" data-type="homework">Homework</span></li>\n        <li><span class="btn-link" data-type="exercise">Exercise</span></li>\n    </ul>\n</div>',l=function(e){var t,r,i=this,s=e.attr("data-type")||"Worked Example",o=n(f);o.find(".type").text(s.charAt(0).toUpperCase()+s.slice(1));o.find(".dropdown-menu li").each(function(e,t){if(n(t).children("span").data("type")===s)return n(t).addClass("checked")});r=e.children(".header");t=r.contents();r.empty().addClass("aloha-block-dropzone").attr("placeholder","Type the text of your header here.").aloha().append(t);o.prependTo(e);return n("<div>").addClass("exercise-controls").addClass("aloha-ephemera").append('<span class="add-exercise btn-link">Click here to add a part</span>').appendTo(e)},c=function(){};return t.create("multipart",{getLabel:function(){return"multipart"},activate:l,deactivate:c,selector:".multipart,.problemset",ignore:".multipart > .header,.problemset > .header",init:function(){var e=this;u.register(this);i.adopt("insertMultipart",s,{click:function(){return u.insertAtCursor(a)}});u.registerEvent("click",".multipart .exercise-controls .add-exercise,                                              .problemset .exercise-controls .add-exercise",function(){var t=n(this).parents(e.selector).first();console.log(e.selector,t);o.appendTo(t);return n(this).parents(".exercise-controls").appendTo(t)});return u.registerEvent("click",".multipart > .type-container > ul > li > *,                                              .problemset > .type-container > ul > li > *",function(){var e=this,t=n(this);t.parents(".type-container").first().children(".type").text(t.text());t.parents(".aloha-oer-block").first().attr("data-type",t.data("type"));t.parents("aloha-oer-block").first().children(".exercise").each(function(){return n(this).attr("data-type",t.data("type"))});t.parents(".type-container").find(".dropdown-menu li").each(function(e,t){return n(t).removeClass("checked")});return t.parents("li").first().addClass("checked")})}})})}).call(this);